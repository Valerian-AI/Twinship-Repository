/* --- Global Styles & Variables --- */
:root {
    --primary-text-light: #181818;
    --border-color-light: rgba(0, 0, 0, 0.1);
    --accent-color: #007BFF;
    --shadow-color: rgba(0,0,0,0.1);
    --dark-shadow-color: rgba(0,0,0,0.2);
    --primary-text-dark: #e0e0e0;
    --border-color-dark: rgba(255, 255, 255, 0.1);
    --glass-bg-light: rgba(255, 255, 255, 0.65);
    --glass-bg-dark: rgba(30, 30, 30, 0.75);
    --glass-button-hover: rgba(255, 255, 255, 0.85);
    --glass-button-hover-dark: rgba(50, 50, 50, 0.85);
}

/* --- Custom Cursor Styles --- */
html,
body {
    cursor: url('/assets/normalpointer.gif') 0 0, auto;
}
a,
button,
.profile-picture,
.grid-item img,
.story-item > div,
#more-images-trigger,
#admin-fab,
.bg-thumbnail,
.lightbox-arrow {
    cursor: url('/assets/normalhoveringlink.gif') 12 5, pointer;
}
input[type="text"],
textarea,
#chat-input {
    cursor: url('/assets/normaltext.gif') 16 16, text;
}
.working-in-background {
    cursor: url('/assets/normalworkingbackground.gif') 0 0, progress;
}
.working-busy {
    cursor: url('/assets/normalworkingbusy.gif') 16 16, wait;
}

/* --- Base Body & Main Layout --- */
body {
    font-family: 'Times New Roman', Times, serif;
    margin: 0;
    color: var(--primary-text-light);
    background-image: url('background.jpg');
    background-size: cover;
    background-repeat: no-repeat;
    background-attachment: scroll; /* CORRECTED */
}
body.dark-theme {
    color: var(--primary-text-dark);
}

main {
    max-width: 1400px;
    margin: 20px auto;
    padding: 20px;
}

/* --- Glass Effect --- */
section,
aside section,
.player-card,
#playlist,
#credits-footer,
.customization-controls,
#admin-menu,
#more-images-widget {
    background-color: var(--glass-bg-light);
    backdrop-filter: blur(12px);
    -webkit-backdrop-filter: blur(12px);
    border-radius: 12px;
    box-shadow: 0 4px 12px var(--shadow-color);
    border: 1px solid rgba(255, 255, 255, 0.2);
}
body.dark-theme section,
body.dark-theme aside section,
body.dark-theme .player-card,
body.dark-theme #playlist,
body.dark-theme #credits-footer,
body.dark-theme .customization-controls,
body.dark-theme #admin-menu,
body.dark-theme #more-images-widget {
    background-color: var(--glass-bg-dark);
    box-shadow: 0 4px 15px rgba(0,0,0,0.2);
    border: 1px solid rgba(255, 255, 255, 0.1);
}
section, aside section {
    padding: 25px;
    margin-bottom: 30px;
}

/* --- Header & Banner --- */
#profile-header {
    position: relative;
    text-align: center;
    margin-bottom: 20px;
}
.header-background {
    height: 300px;
    border-radius: 12px;
    background-size: cover;
    background-position: center;
    position: relative;
    background-color: var(--glass-bg-light);
    backdrop-filter: blur(8px);
    -webkit-backdrop-filter: blur(8px);
    border: 1px solid rgba(255, 255, 255, 0.2);
    box-shadow: 0 4px 12px var(--shadow-color);
}
body.dark-theme .header-background {
    background-color: var(--glass-bg-dark);
    border-color: rgba(255, 255, 255, 0.1);
}
.profile-info {
    position: relative;
    margin-top: -90px;
}
.profile-picture {
    width: 150px;
    height: 150px;
    border-radius: 50%;
    border: 2px solid transparent;
    background: var(--glass-bg-light) padding-box;
    backdrop-filter: blur(12px);
    -webkit-backdrop-filter: blur(12px);
    padding: 5px;
    object-fit: cover;
    transition: transform 0.2s ease;
}
.profile-picture:hover {
    transform: scale(1.05);
}
body.dark-theme .profile-picture {
    background: var(--glass-bg-dark) padding-box;
}

/* --- Layout & Grids --- */
.main-layout { display: flex; flex-wrap: wrap; gap: 30px; }
.content-column { flex: 3; min-width: 300px; }
.sidebar-column { flex: 1; min-width: 280px; }
.grid-container { display: grid; grid-template-columns: repeat(auto-fill, minmax(180px, 1fr)); gap: 15px; }
.grid-item { position: relative; }
.grid-container img { width: 100%; height: 150px; object-fit: cover; border-radius: 8px; transition: all 0.2s ease-in-out; }
#image-grid .grid-item img:hover,
#gif-grid .grid-item img:hover { transform: scale(1.05); box-shadow: 0 5px 15px var(--dark-shadow-color); }

/* --- More Images Widget --- */
#more-images-container { position: relative; width: 180px; height: 150px; }
#more-images-trigger { width: 100%; height: 100%; border-radius: 8px; background-color: var(--glass-bg-light); backdrop-filter: blur(5px); -webkit-backdrop-filter: blur(5px); display: flex; justify-content: center; align-items: center; font-size: 2.5rem; color: var(--primary-text-light); transition: background-color 0.2s ease; }
body.dark-theme #more-images-trigger { background-color: var(--glass-bg-dark); color: var(--primary-text-dark); }
#more-images-widget { position: absolute; bottom: 0; left: 105%; z-index: 100; width: auto; height: 120px; padding: 10px; display: flex; align-items: center; gap: 10px; }
#more-images-grid { display: flex; gap: 10px; overflow-x: auto; scrollbar-width: none; -ms-overflow-style: none; scroll-behavior: smooth; }
#more-images-grid::-webkit-scrollbar { display: none; }
#more-images-grid .grid-item img { width: 100px; height: 100px; object-fit: cover; border-radius: 8px; }
.scroll-arrow { height: 100px; border: none; background-color: rgba(0,0,0,0.05); color: var(--primary-text-light); font-size: 1.5rem; padding: 0 10px; border-radius: 5px; }
body.dark-theme .scroll-arrow { background-color: rgba(255,255,255,0.1); color: var(--primary-text-dark); }

/* --- Admin UI & Controls --- */
.customization-controls { display: flex; align-items: center; gap: 15px; position: absolute; top: 15px; right: 15px; z-index: 25; padding: 5px 10px; border-radius: 30px; }
#change-banner-button { position: absolute; top: 15px; right: 15px; z-index: 20; font-size: 1.2rem; height: 40px; width: 40px; border-radius: 50%; border: 1px solid rgba(255, 255, 255, 0.2); background-color: var(--glass-bg-light); backdrop-filter: blur(5px); -webkit-backdrop-filter: blur(5px); color: var(--primary-text-light); display: flex; align-items: center; justify-content: center; }
body.dark-theme #change-banner-button { background-color: var(--glass-bg-dark); border-color: rgba(255, 255, 255, 0.1); color: var(--primary-text-dark); }
.hidden { display: none !important; }
.delete-button { position: absolute; top: 5px; right: 5px; background-color: rgba(255, 0, 0, 0.7); color: white; border: none; border-radius: 50%; width: 25px; height: 25px; font-weight: bold; line-height: 25px; text-align: center; padding: 0; }
.drag-handle { position: absolute; top: 5px; left: 5px; background-color: rgba(0, 0, 0, 0.5); color: white; border-radius: 3px; padding: 2px 5px; cursor: grab; }
#admin-tools { position: fixed; bottom: 20px; left: 20px; z-index: 2000; }
#admin-fab { width: 50px; height: 50px; border-radius: 50%; background-color: var(--accent-color); color: white; border: none; font-size: 24px; display: flex; justify-content: center; align-items: center; box-shadow: 0 4px 10px rgba(0,0,0,0.3); transition: transform 0.2s ease; }
#admin-fab:hover { transform: scale(1.1); }
#admin-menu { position: absolute; bottom: 65px; left: 0; width: 250px; padding: 10px; display: flex; flex-direction: column; gap: 10px; }
#admin-menu .menu-header { font-weight: bold; text-align: center; padding-bottom: 10px; border-bottom: 1px solid var(--border-color-light); margin-bottom: 5px; }
body.dark-theme #admin-menu .menu-header { border-color: var(--border-color-dark); }
#admin-menu button { width: 100%; background-color: rgba(0,0,0,0.05); color: var(--primary-text-light); text-align: left; padding: 10px 15px; }
body.dark-theme #admin-menu button { background-color: rgba(255,255,255,0.1); color: var(--primary-text-dark); }

/* --- Misc Sections --- */
#youtube-section a { text-decoration: none; color: var(--accent-color); font-weight: bold; }
.file-list { list-style: none; padding: 0; }
.file-list li { padding: 10px; border-bottom: 1px solid var(--border-color-light); display: flex; justify-content: space-between; align-items: center; }
.file-list li a { text-decoration: none; color: inherit; }
.story-item { display: flex; justify-content: space-between; align-items: center; padding: 10px; border-bottom: 1px solid var(--border-color-light); }
.story-item > div { flex-grow: 1; }
.story-item .delete-button { position: static; display: inline-block; margin-left: 10px; flex-shrink: 0; }
#story-list { max-height: 500px; overflow-y: auto; }
#story-list h4, #story-list p { margin: 0; } #story-list p { font-size: 0.9rem; opacity: 0.7; }
#chat-container { border: 1px solid var(--border-color-light); border-radius: 8px; padding: 10px; }
body.dark-theme #chat-container { border-color: var(--border-color-dark); }
#messages { height: 200px; overflow-y: auto; list-style: none; padding: 0; }
#chat-form { display: flex; gap: 10px; margin-top: 10px; }

#credits-footer { max-width: 1400px; margin: 20px auto; padding: 20px; text-align: center; font-size: 0.9rem; }
#credits-footer h3 { margin: 0 0 10px 0; }
#credits-footer ul { list-style: none; padding: 0; margin: 0; }
#credits-footer a { color: var(--accent-color); }

/* --- Lightbox --- */
#lightbox { position: fixed; z-index: 1000; top: 0; left: 0; width: 100%; height: 100%; background-color: rgba(0, 0, 0, 0.85); display: flex; justify-content: center; align-items: center; }
.lightbox-content { max-width: 80%; max-height: 80%; border-radius: 5px; }
.close-button { position: absolute; top: 20px; right: 30px; color: #fff; font-size: 40px; font-weight: bold; }
.lightbox-arrow { position: absolute; top: 50%; transform: translateY(-50%); background-color: rgba(0, 0, 0, 0.5); color: white; border: none; font-size: 2rem; padding: 10px 15px; border-radius: 5px; opacity: 0.7; transition: opacity 0.2s ease; }
.lightbox-arrow:hover { opacity: 1; }
.lightbox-arrow.prev { left: 20px; }
.lightbox-arrow.next { right: 20px; }

/* --- Music Player --- */
#music-player { position: fixed; bottom: 15px; right: 15px; z-index: 100; display: flex; flex-direction: column; align-items: flex-end; }
.player-card { width: 300px; box-sizing: border-box; padding: 15px; text-align: center; }
#album-art { width: 100%; height: auto; aspect-ratio: 1 / 1; object-fit: cover; border-radius: 8px; margin-bottom: 15px; }
.song-info h4, .song-info p { margin: 0; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
.song-info p { font-size: 0.9rem; opacity: 0.7; margin-top: 5px; }
.progress-container { width: 100%; background-color: rgba(0,0,0,0.1); border-radius: 5px; margin: 10px 0; cursor: pointer; height: 6px; }
.progress { background-color: var(--accent-color); width: 0%; height: 100%; border-radius: 5px; transition: width 0.1s linear; }
.time-stamps { display: flex; justify-content: space-between; font-size: 0.8rem; opacity: 0.8; margin: 5px 0 10px 0; }
.controls { display: flex; justify-content: center; align-items: center; gap: 20px; }
.controls button { background: none; border: none; font-size: 1.5rem; color: var(--primary-text-light); }
body.dark-theme .controls button { color: var(--primary-text-dark); }
#play-pause-button { font-size: 2.5rem; }
.playlist-container { margin-top: 10px; display: flex; flex-direction: column; }
#playlist-toggle { padding: 8px 15px; border-radius: 20px; width: auto; align-self: flex-end; }
#playlist { list-style: none; padding: 10px; margin: 5px 0 0 0; max-height: 200px; overflow-y: auto; width: 300px; box-sizing: border-box; text-align: left; }
#playlist li { display: flex; align-items: center; padding: 8px; border-radius: 5px; transition: background-color 0.2s; }
#playlist li.playing { background-color: var(--accent-color); color: white; }
#playlist li img { width: 40px; height: 40px; object-fit: cover; border-radius: 4px; margin-right: 10px; }

/* --- Forms & Background Switcher --- */
input[type="text"], textarea, #chat-input { width: 100%; box-sizing: border-box; padding: 10px; border: 1px solid var(--border-color-light); border-radius: 5px; font-family: 'Times New Roman', Times, serif; font-size: 1rem; background-color: rgba(255, 255, 255, 0.5); color: inherit; }
body.dark-theme input[type="text"], body.dark-theme textarea, body.dark-theme #chat-input { border-color: var(--border-color-dark); background-color: rgba(0,0,0,0.5); }
textarea { min-height: 200px; resize: vertical; }
button { background: var(--accent-color); color: white; border: none; padding: 10px 15px; border-radius: 5px; }
#background-controls { display: flex; align-items: center; gap: 10px; }
#background-categories { display: flex; background-color: rgba(0,0,0,0.05); border-radius: 20px; padding: 2px; }
body.dark-theme #background-categories { background-color: rgba(255,255,255,0.1); }
#background-categories button { background: transparent; border: none; padding: 5px 10px; border-radius: 20px; color: var(--primary-text-light); font-size: 0.8rem; }
body.dark-theme #background-categories button { color: var(--primary-text-dark); }
#background-categories button.active { background-color: var(--secondary-bg-light); box-shadow: 0 1px 3px rgba(0,0,0,0.1); }
body.dark-theme #background-categories button.active { background-color: var(--secondary-bg-dark); }
#background-switcher { display: flex; gap: 5px; }
.bg-thumbnail { width: 30px; height: 30px; border-radius: 50%; border: 2px solid transparent; background-size: cover; background-position: center; transition: all 0.2s ease; }
.bg-thumbnail:hover { transform: scale(1.1); }
.bg-thumbnail.active { border-color: var(--accent-color); transform: scale(1.1); }

/* --- Glass Upload Buttons --- */
.upload-form {
    display: flex;
    gap: 10px;
    align-items: center;
}
.upload-form input[type="file"] {
    display: none; /* hide native file input if visible */
}
.glass-button {
    background-color: var(--glass-bg-light);
    backdrop-filter: blur(12px);
    -webkit-backdrop-filter: blur(12px);
    border: 1px solid rgba(255,255,255,0.3);
    border-radius: 12px;
    padding: 10px 20px;
    color: var(--primary-text-light);
    font-size: 1rem;
    cursor: pointer;
    margin-right: 10px;
    transition: all 0.18s cubic-bezier(.2,.8,.2,1);
    box-shadow: 0 6px 18px rgba(0,0,0,0.06);
}
.glass-button:hover,
.upload-form .glass-button:focus {
    background-color: var(--glass-button-hover);
    transform: translateY(-3px) scale(1.02);
    color: var(--primary-text-light);
}
body.dark-theme .glass-button {
    background-color: var(--glass-bg-dark);
    color: var(--primary-text-dark);
    border: 1px solid rgba(255,255,255,0.06);
}
body.dark-theme .glass-button:hover,
body.dark-theme .upload-form .glass-button:focus {
    background-color: var(--glass-button-hover-dark);
    color: var(--primary-text-dark);
}

/* --- Image Carousel (3 visible items) --- */
.carousel-container {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 10px;
    margin-top: 20px;
}
.carousel-wrapper {
    overflow: hidden;
    width: calc(180px * 3 + 20px); /* 3 images + gaps (exact fit with item width and gap) */
}
.carousel {
    display: flex;
    gap: 10px;
}
.carousel-item {
    min-width: 180px;
    height: 150px;
    border-radius: 8px;
    overflow: hidden;
    flex-shrink: 0;
    display: block;
    transition: transform 0.18s ease, box-shadow 0.18s ease;
}
.carousel-item img {
    width: 100%;
    height: 100%;
    border-radius: 8px;
    object-fit: cover;
    display: block;
}
.carousel-item:hover {
    transform: scale(1.05);
    box-shadow: 0 5px 15px var(--dark-shadow-color);
}
.carousel-arrow {
    font-size: 1.5rem;
    background-color: rgba(0,0,0,0.05);
    color: var(--primary-text-light);
    border: none;
    border-radius: 8px;
    padding: 0 15px;
    cursor: pointer;
    height: 150px;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.18s ease;
}
body.dark-theme .carousel-arrow {
    background-color: rgba(255,255,255,0.06);
    color: var(--primary-text-dark);
}
.carousel-arrow:hover {
    background-color: var(--accent-color);
    color: #fff;
}

/* make sure old selectors that targeted #image-grid don't break layout if still present */
#image-grid {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 15px;
}
#image-grid .grid-item {
    width: 100%;
}

/* --- Responsive tweaks for narrow screens --- */
@media (max-width: 720px) {
    .carousel-wrapper { width: calc(140px * 2 + 10px); } /* show 2 items on smaller screens */
    .carousel-item { min-width: 140px; height: 120px; }
    .carousel-arrow { height: 120px; padding: 0 10px; font-size: 1.2rem; }
}
@media (max-width: 420px) {
    .carousel-wrapper { width: calc(110px * 1 + 0px); } /* show 1 item on very small screens */
    .carousel-item { min-width: 110px; height: 90px; }
    .carousel-arrow { height: 90px; padding: 0 8px; font-size: 1rem; }
}

/* --- Remaining original rules (re-included to ensure completeness) --- */

/* Note: the following duplicates large portions of earlier rules to avoid accidental omissions.
   They are intentionally left unchanged from the original stylesheet you provided. */

/* You already have base button styles above; those remain in effect for generic buttons.
   The .glass-button class overrides appearance for upload buttons only. */

/* End of stylesheet */
